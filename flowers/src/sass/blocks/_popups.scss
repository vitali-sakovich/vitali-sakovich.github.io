@keyframes overlay-shows {
    0% {
        opacity: 0;
    }
    100% {
        opacity: 1;
    }
}
@keyframes overlay-hidden {
    0% {
        opacity: 1;
    }
    100% {
        opacity: 0;
    }
}

@keyframes popup-shows {
    0% {
        transform: translateX(var(--translate-x-popup, 100%));
    }
    100% {
        transform: translateX(0);
    }
}
@keyframes popup-hidden {
    0% {
        transform: translateX(0);
    }
    100% {
        transform: translateX(var(--translate-x-popup, 100%));
    }
}

.popup {
    $self: &;
    display: none;
    position: fixed;
    justify-content: flex-end;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    z-index: 1001;

    &--sidebar {
        justify-content: flex-start;
    }

    &--is-show {
        --overlay-show: overlay-shows;
        --popup-show: popup-shows;
    }

    &--sharing {
        --popup-block-width: #{em(550, $fz)};
        --translate-x-popup: 0;
        align-items: center;
        justify-content: center;
        animation: var(--overlay-show, overlay-hidden) 0.3s forwards;

        .js-btn-copy-btn {
            width: 100%;
        }
    }

    &--basket {
        --popup-block-width: #{em(980, $fz)};
    }

    &__overlay {
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        background-color: rgba(242, 238, 244, 0.7);
        z-index: -1;
        cursor: url("../img/close.svg"), auto;
        animation: var(--overlay-show, overlay-hidden) 0.3s forwards;
        will-change: opacity;
    }

    &__block {
        display: flex;
        flex-direction: column;
        width: 100%;
        max-width: var(--popup-block-width, em(710, $fz));
        background-color: #fff;
        animation: var(--popup-show, popup-hidden) 0.2s forwards;
        box-shadow: em(0 0 40, $fz) rgba(83, 61, 212, 0.38);
    }

    &__head {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: em(53 35 30 66, $fz);
        border-bottom: 1px solid #CACACA;
    }

    &__close {
        background-color: transparent;
        transition: opacity 0.3s;

        &:hover {
            opacity: 0.7;
        }
    }

    &__content {
        @include scrollbar;
        padding: em(55 66, $fz);

        #{$self}--add-profile &,
        #{$self}--sharing & {
            padding-top: em(30, $fz);
        }
    }

    &__text {
        $fz: 18;
        display: block;
        font-size: em($fz, $fz_base);
        line-height: 1.4;
        max-width: em(500, $fz);
        margin-bottom: em(50, $fz);
    }

    &__form {
        display: flex;
        flex-direction: column;
    }

    &__share {
        margin-bottom: em(65, $fz) !important;
    }

    &__search {
        width: 100%;
        max-width: em(740, $fz);
    } 
}

.sidebar {
    --translate-x-popup: -100%;
    display: flex;
    height: 100%;
    max-width: em(1342, $fz);
    background-color: #fff;
    box-shadow: em(0 0 40, $fz) rgba(83, 61, 212, 0.38);
    animation: var(--popup-show, popup-hidden) 0.2s forwards;
    will-change: transform;

    &__catalog {
        width: 100%;
    }
}

.sidebar-close {
    display: flex;
    position: relative;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    padding-left: em(46, $fz);
    background-color: transparent;

    &:hover {
        --btn-close-transform: #{em(-10, $fz)};
    }

    &::before {
        content: "";
        position: absolute;
        top: 0;
        right: em(36, $fz);
        width: 1px;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.28);
        transform: translateX(var(--btn-close-transform));
        transition: transform 0.3s;
        will-change: transform;
    }

    &__wrap {
        display: flex;
        position: relative;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        height: em(100, $fz);
        background-color: #fff;
        transform: translate(var(--btn-close-transform, 0), em(-50, $fz));
        transition: transform 0.3s;
        will-change: transform;
    }

    &__icon {
        margin-bottom: em(10, $fz);
    }

    &__text {
        line-height: 1.5;
    }
}

.sidebar-catalog {
    display: flex;

    &__block {
        display: flex;
        flex-direction: column;
        width: 100%;
        height: 100%;

        &:first-child {
            border-right: 1px solid rgba(0, 0, 0, 0.28);
        }

        &--retail {
            --grid-number-col: 4;
            --label-header-bg: #9da63b;
            padding-left: em(60, $fz);
        }

        &--opt {
            --grid-number-col: 2;
            --label-header-bg: #b15933;
            padding-left: em(55, $fz);
        }
    }

    &__head {
        display: flex;
        align-items: center;
        padding-top: em(60, $fz);
        padding-bottom: em(40, $fz);
        padding-left: em(20, $fz);
        min-height: em(141, $fz);
    }

    &__title {
        margin-right: em(8, $fz);
    }

    &__label {
        $fz: 17;
        border-radius: em(7, $fz);
        background-color: var(--label-header-bg);
        font-size: em($fz, $fz_base);
        font-weight: 700;
        padding: em(6 30, $fz);
        color: #fff;
    }

    &__grid {
        @include scrollbar;
        display: grid;
        align-content: start;
        grid-template-columns: repeat(var(--grid-number-col), em(160, $fz));
        grid-row-gap: em(20, $fz);
        padding-right: em(64, $fz);
        padding-bottom: em(20, $fz);
    }
}

.popup-title {
    $fz: 36;
    font-size: em($fz, $fz_base);
    font-weight: 600;
}

.catalog-link {
    display: flex;
    flex-direction: column;
    align-items: center;

    &:hover {
        --catalog-link-img-scale: 1.1;
    }

    &__picture {
        display: flex;
        border-radius: em(35, $fz);
        overflow: hidden;
        width: em(120, $fz);
        height: em(120, $fz);
        margin-bottom: em(12, $fz);
    }

    &__img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transform: scale(var(--catalog-link-img-scale));
        transition: transform 0.3s;
        will-change: transform;
    }

    &__label {
        border-radius: em(7, $fz);
        background-color: #533dd4;
        padding-right: em(8, $fz);
        padding-left: em(8, $fz);
        font-weight: 600;
        line-height: 1.5;
        color: #fff;
    }

    &__name {
        display: flex;
        line-height: 1.5;
        color: #000;
        text-align: center;
        min-height: em(66, $fz);
    }
}

.popup-thank {
    display: flex;
    align-items: center;

    &__text {
        $fz: 18;
        font-size: em($fz, $fz_base);
        line-height: 1.5;
    }

    &__icon {
        margin-left: em(25, $fz);
        fill: #2FA827;
    }
}

.tabs {
    &__nav {
        display: grid;
        grid-template-columns: 47% 53%;
        grid-column-gap: em(3, $fz);
        border-radius: em(31, $fz);
        background-color: #D9E0E7;
        max-width: em(440, $fz);
        padding: em(4 5, $fz);
        margin-bottom: em(40, $fz);
    }

    &__btn {
        $fz: 18;
        display: flex;
        justify-content: center;
        align-items: center;
        width: 100%;
        height: em(54, $fz);
        border-radius: em(31, $fz);
        font-size: em($fz, $fz_base);
        background-color: transparent;
        transition: background-color 0.3s;

        &--active {
            background-color: #fff;
        }
    }

    &__panel {
        display: none;
        flex-direction: column;

        &--show {
            display: flex;
        }
    }
}

.popup-search {
    display: flex;
    flex-direction: column;
    height: 100%;
    background-color: #fff;
    animation: var(--popup-show, popup-hidden) 0.2s forwards;
    box-shadow: em(0 0 40, $fz) rgba(83, 61, 212, 0.38);

    &__head {
        display: flex;
        justify-content: space-between;
        width: 100%;
        padding-top: em(40, $fz);
        padding-right: em(35, $fz);
        padding-left: em(94, $fz);
        margin-bottom: em(50, $fz);
    }

    &__form {
        display: grid;
        width: em(520, $fz);
    }

    &__label {
        grid-area: -1/1;
    }

    &__input {
        border-radius: em(32, $fz);
        border: em(3, $fz) solid #575757;
        width: 100%;
        height: em(58, $fz);
        padding-right: em(60, $fz);
        padding-left: em(24, $fz);
        color: #3D4A62;
        transition: border-color 0.3s;

        &:focus {
            border-color: rgba(0, 0, 0, 0.8);
        }
    }

    &__btn {
        display: flex;
        align-items: center;
        justify-content: center;
        grid-area: -1/1;
        justify-self: self-end;
        align-self: center;
        width: em(60, $fz);
        height: em(50, $fz);
        background-color: transparent;

        &:hover {
            --btn-search-fill: rgba(0, 0, 0, 0.8);
        }
    }

    &__icon {
        transition: fill 0.3s;
        fill: var(--btn-search-fill, #575757);
    }
}

.search-autocomplete {
    display: flex;
    flex-direction: column;
    flex-grow: 1;
    height: 100%;
    overflow: hidden;

    &__list {
        @include scrollbar;
        display: flex;
        flex-direction: column;
        padding-right: em(125, $fz);
        padding-left: em(108, $fz);
    }

    &__item {
        margin-bottom: em(20, $fz);
    }

    &__controls {
        position: relative;
        width: 100%; 
        background-color: #fff;
        padding: em(34 125 34 108, $fz);

        &::before {
            content: '';
            position: absolute;
            right: 0;
            left: 0;
            bottom: 100%;
            height: em(20, $fz);
            background-image: linear-gradient(bottom, rgba(0, 0, 0, 0.14) 0%, rgba(255, 255, 255, 0.00) 99.99%);
            pointer-events: none;
        }
    }
}

.search-autocomplete-item {
    display: grid;
    align-content: start;
    grid-template-columns: em(80, $fz) 1fr;
    grid-gap: em(2 20, $fz);

    &:hover {
        --autocomplete-item-scale: 1.2;
        --autocomplete-item-color: rgba(0, 0, 0, 0.6);
    }

    &__picture {
        width: em(80, $fz);
        height: em(80, $fz);
        grid-area: 1/1/4/2;
        overflow: hidden;
    }

    &__img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transform: scale(var(--autocomplete-item-scale));
        transition: transform 0.3s;
        will-change: transform;
    }

    &__name,
    &__cost {
        transition: color 0.3s;
        color: var(--autocomplete-item-color, #000);
    }

    &__name {
        line-height: 1.5;
    }

    &__cost {
        $fz: 20;
        font-size: em($fz, $fz_base);
        line-height: 1.2;
        font-weight: 600;
    }
}